<section>
  <!-- Navigation Header -->
  <section-navigation />

  <!-- Header Section -->
  <section-header [data]="header()">
    <!-- Copy Button -->
    <button
      matIconButton
      class="!text-muted-foreground hover:!text-foreground transition-colors flex-shrink-0"
      matTooltip="Copy code"
      (click)="copyCurrentView()"
    >
      <mat-icon class="!text-lg">content_copy</mat-icon>
    </button>
  </section-header>

  <!-- View Mode Toggle -->
  <bd-header [(viewMode)]="viewMode" />

  <!-- Content Section -->
  <div class="h-[50dvh] border border-border rounded-lg overflow-hidden">
    <!-- Code View -->
    @if (!isPreview()) {
    <div>
      <mat-tab-group
        [(selectedIndex)]="selectedTabIndex"
        class="block-tabs"
        animationDuration="200ms"
      >
        @for (view of blockData()?.views; track $index) {
        <mat-tab [label]="view.label">
          <!-- Code Content -->
          <div class="relative">
            <div class="absolute top-3 right-3 z-10">
              <button
                matIconButton
                size="small"
                class="!text-muted-foreground hover:!text-foreground !bg-background/80 backdrop-blur-sm !shadow-sm"
                matTooltip="Copy"
                (click)="copyCode(view.content)"
              >
                <mat-icon class="!text-base">content_copy</mat-icon>
              </button>
            </div>

            <pre
              class="bg-card text-card-foreground p-4 overflow-x-auto text-sm leading-relaxed"
            ><code [class]="'language-' + (view.language || 'typescript')">{{ view.content }}</code></pre>
          </div>
        </mat-tab>
        }
      </mat-tab-group>
    </div>
    }

    <!-- Preview View -->
    <!-- @if (isPreview()) {
    <div class="relative h-full">
      @if (!blockData()?.previewUrl) {
      <div class="flex items-center justify-center h-full">
        <div class="text-center">
          <mat-icon class="text-4xl mb-2">preview</mat-icon>
          <p>No preview available for this block</p>
        </div>
      </div>
      }@else{
      <iframe [src]="safeUrl()" class="w-full h-full border-0" #previewFrame>
      </iframe>
      }
    </div>
    } -->
  </div>

  <!-- Footer Info -->
  <!-- @if (!isPreview()) {
  <div class="px-6 py-3 bg-muted/20">
    <div
      class="flex items-center justify-between text-xs text-muted-foreground"
    >
      <span
        >{{ blockData()?.views?.length }} view{{
          blockData()?.views?.length !== 1 ? "s" : ""
        }}
        available</span
      >
      <span class="flex items-center gap-1">
        <mat-icon class="!text-xs">code</mat-icon>
        {{ getCurrentLanguage() }}
      </span>
    </div>
  </div>
  } -->
</section>

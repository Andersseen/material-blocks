<section>
  <!-- Navigation Header -->
  <section-navigation />
  <!-- Header Section -->
  <section-header [data]="header()">
    <!-- Copy Button -->
    <button
      matIconButton
      class="!text-muted-foreground hover:!text-foreground transition-colors flex-shrink-0"
      matTooltip="Copy code"
      (click)="copyCurrentView()"
    >
      <mat-icon class="!text-lg">content_copy</mat-icon>
    </button>
  </section-header>

  <!-- View Mode Toggle -->
  <bd-header [(viewMode)]="viewMode" />

  <!-- Content Section -->
  <div class="h-[50dvh] border border-border rounded-lg overflow-hidden">
    <!-- Code View -->
    @if (!isPreview()) {
    <bd-code
      [blockViews]="blockData()?.views"
      [(selectedTabIndex)]="selectedTabIndex"
    />
    } @else {
    <!-- Preview View -->

    <bd-preview [showIframe]="!!blockData()?.previewUrl" />
    }
  </div>

  <!-- Footer Info -->
  @if (!isPreview()) {
  <div class="px-6 py-3 bg-muted/20">
    <div
      class="flex items-center justify-between text-xs text-muted-foreground"
    >
      <span
        >{{ blockData()?.views?.length }} view{{
          blockData()?.views?.length !== 1 ? "s" : ""
        }}
        available</span
      >
      <span class="flex items-center gap-1">
        <mat-icon class="!text-xs">code</mat-icon>
        {{ getCurrentLanguage() }}
      </span>
    </div>
  </div>
  }
</section>
